<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>SafeSpend Settings</title>
    <link rel="stylesheet" href="options.css" />
  </head>
  <body>
    <main class="page">
      <header>
        <h1>SafeSpend Settings</h1>
        <p>Simple controls for account, scanning, and safety.</p>
      </header>

      <section class="card">
        <h2>Account Connection</h2>
        <p id="authSummary" class="auth-summary"><span id="authSummaryText">Checking account status...</span><span id="authCheckingSpinner" class="loading-dot hidden" aria-hidden="true"></span></p>
        <div class="actions">
          <button id="connectBtn" type="button">Connect SafeSpend</button>
          <button id="registerBtn" class="hidden" type="button">Create Account</button>
          <button id="signOutBtn" class="secondary hidden" type="button">Sign Out</button>
        </div>
      </section>

      <section class="card">
        <h2>Caching</h2>
        <label for="cacheTtlHours">Cache TTL (hours)</label>
        <input id="cacheTtlHours" type="number" min="1" max="72" />

        <div class="actions">
          <button id="saveCacheBtn" type="button">Save Cache Settings</button>
          <button id="clearCacheBtn" type="button">Clear Cached Results</button>
        </div>
      </section>

      <section class="card">
        <h2>Ongoing Scans</h2>
        <p class="hint">Live view of scans currently running in the extension worker.</p>
        <div id="ongoingScansEmpty" class="hint">No active scans right now.</div>
        <div id="ongoingScansList" class="scan-list hidden"></div>
      </section>

      <section id="feedbackCard" class="card hidden">
        <h2>Requests and Feedback</h2>
        <p class="hint">Request verified sites, report bugs, or send product feedback.</p>
        <label for="feedbackCategory">Type</label>
        <select id="feedbackCategory">
          <option value="verified_site_request">Request verified site</option>
          <option value="bug_report">Report a bug</option>
          <option value="general_feedback">General feedback</option>
        </select>
        <label for="feedbackDomain">Website domain (optional)</label>
        <input id="feedbackDomain" type="text" placeholder="example.com" />
        <label for="feedbackEmail">Contact email (optional)</label>
        <input id="feedbackEmail" type="email" placeholder="you@company.com" />
        <label for="feedbackMessage">Message</label>
        <textarea id="feedbackMessage" rows="5" placeholder="What should we verify, or what issue did you hit?"></textarea>
        <div class="actions">
          <button id="submitFeedbackBtn" type="button">Submit</button>
        </div>
      </section>

      <section id="dangerZone" class="card danger-zone hidden">
        <h2>Danger Zone</h2>
        <p class="danger-copy">
          Permanently delete your SafeSpend account and linked extension data. This cannot be undone.
        </p>
        <div class="actions">
          <button id="startDeleteBtn" class="danger" type="button">Delete Account</button>
        </div>
        <div id="deleteConfirmPanel" class="hidden">
          <div class="kv-row">
            <span class="k-label">Confirm account email</span>
            <code id="deleteExpectedEmail" class="mono">Loading...</code>
          </div>
          <label for="deleteConfirmEmail">Type your email to confirm</label>
          <input id="deleteConfirmEmail" type="email" autocomplete="off" />
          <label class="check-row">
            <input id="deleteConfirmAck" type="checkbox" />
            <span>I understand this action is permanent.</span>
          </label>
          <div class="actions">
            <button id="cancelDeleteBtn" class="secondary" type="button">Cancel</button>
            <button id="deleteAccountBtn" class="danger hidden" type="button">Delete Account and Data</button>
          </div>
        </div>
      </section>

      <section class="card">
        <h2>Install Identity</h2>
        <p id="installHash" class="mono">Loading...</p>
      </section>

      <p id="status" class="status"></p>
    </main>

    <script src="runtime_config.js"></script>
    <script src="options.js"></script>
  </body>
</html>
